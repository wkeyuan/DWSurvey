webpackJsonp([1],{"+Zdd":function(e,t){},"/MZe":function(e,t){},"0xJ2":function(e,t){},"1ghF":function(e,t){},"5GBw":function(e,t){},"6MpI":function(e,t){},"6xT/":function(e,t){},"7Otq":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMQAAAAmCAYAAACbKjTiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjE4QkVDOERGRkFFMTFFODk3NDdCRUVFNEFCMjY4RDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjE4QkVDOEVGRkFFMTFFODk3NDdCRUVFNEFCMjY4RDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGMThCRUM4QkZGQUUxMUU4OTc0N0JFRUU0QUIyNjhEOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGMThCRUM4Q0ZGQUUxMUU4OTc0N0JFRUU0QUIyNjhEOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PssYC+sAAAhESURBVHja7F3Nb1tFEB+nSamaopgPtYIL5goXV3BBQrJzAsTB6Q1xIA43OBD7hFohbB/gAlJS9YBACJtCD6BKdSTghOTnf4C4JyQ4YEDlG+KW0pa2iZmtZ+XR6u3He3527bIjjfL8PN7dNzu/+dhdOyk4078AAHeDnkrIXyB/o5X4F+DwEmRPPwGPLc7DqX9uwjbebSKfQb7MRZ96ADx5mlqaR37QIiPAss8CGiCZ/chHkJ8mriG/gvypV7WnWaA55L8tMteQ9xzaEjI3lHsCHJ8gH/eq9jQrgJgEvYm84tXtyQNiSCJtOuhV7skDYkALyC95lXvygBjSc17lnqaZxCqTbfXoXpKz0f59KViaTwHgXx097lXuadoB8SryXQaZz2CwElXXSvQx1KTgz3v2Q3BoAV5f0MedG17lnqaZUnCmv3jrr5kuG9/dw/CA0Hp0CQ4hMGCvrxf96hlLW57ueOr1evl0Oh04ykZtPgODFc1N8QL7iRwhLllqiXeQXza2sg/g+i7A9gU4gdHiuAFeewPpSMqblXkWms/KYSN37gTjjWpQlrkUjbWE0eL1UWy7S/c3SGeuBr8Fg5MQYXOwTX9Few0JQNchzoF9061vbaZPMeYgXi3CYHE1nPeieBHkPrWu8g4ptkIKso1OsE0pOyR3LuI8F2kS5Jha7HVdM74i9fWdpV059qJBrk4yMqXNa3Sm44pGXxsu80Nz5AouYaQBGSxvXziSEo1dcinkXpFYBx5xv0zXG0z3FTY3Ji4IQFy1PMf1CMZhqxGuJuW4SEFVMqrKiO2tUJvyOuM4hm0yRBkZAuIuvV+k8akGHTBvp+srx64LhnFIoLcTDg4lBycSh2pSzwimLLvfQcAsS6YIK3iZccOh/YaiX9nnsoHLPGWajVonHBAFMrYq3SvHbH+VKbNIr2sWMLQICNIrNUJC+wYBrM7aBwJMhz6f10z0CvOEeUP6ICe96aC3qFSn1CaxvFW0hSTmq43XSaaVaaavMum4R30Grmn5HMwm9cgA1ohH8WhpMr4uA1TJ8pkKA4POc4n2jrH3NpRoEIREAp5CpOkZm8wB6KJDJ0IOHkXHYrzrY6hLamFGKmoM5JZg0kGWpTO2uT1HqV52FH3MKiDUECmNLs7kFZmH7TEDLBoAVGKeyObl1lgKxcfXNnh/nga1DWlTTgFXklQmfVSV1Cb2ypLKmhqjQ8/TIw7YaxcaKerMOYAiSthN3SYAbrE0IypJI/1Q+btqqDeAr2I40MmQ8TUNdUSBGXrT8Gx55fmTpC5LG+sJtKcWtgVN9CiLCEL9yzHUYhi60E1LRpwQLukMdNHS8OEIg7jf8v7imAARKOmGK2XJGLtM4U16ndcUvHG8sq6IDjRRIs8MQnpN9bP8dWAwChubaJPazqIBVRKYoypzIpNYT8+zxRL1/lLYB+Zpgk17Az9GGMDbyGcN7++OsabgKU3U6KAWpE1Ki9ZDCvVMjNDcUT7fZZ49T3PQUCJBoIwnC2zDiRlz09BvK4GovkYrZSJ12opbCJPXl3sCRV1aFTJmuaxbjZv6qfWKaalYAOI3SyoTZWdZyP5qeH8PpotWlDSJpzglmrjaGL1ZWITIKTUGv84xQITJJU5i84xWhaqUOh0dY3dymVWXwq2O2yAEIL62yHyE/IJje6/B4CujSdUkUVaK4hTTaSVd4srvMK/cGLHPtMEAeiz96Wo8vywqV0Lqh2DcuhbeHUGxQqlTCV9vjgl8PfV5Jn1SQUSGKxaZnQjtXbS8f2VMz5HV1BMmKrAUJmwHN6tZuQoMq0OmXFY3viaTyYB+2TBgUS0TUvuMm+TydgWNNDOuTkStInfAlZMKE6F5h7w+Sppjkx1XDVGImNdnmLc15aYlGK6Hd1jeX1UKctfxheX7bYpWOQuot2jMORZxgkkZiqgdlNSploDxp0G/MihTp1UwH12x0Sr2k4sCiFkneQ4mrBbQKokZqG1HWhbXawx0AXl0sdl2zGF8RWbULnVE2yDHj5m0J6loljrlE6qrKiwyBkpfAYEmN2IfkcA0yxtzaRiubcu8vxFRSbb1+5MhRggMRPxYhg4MLWbQDU2x2FGiVuAo17wNei8rCxKjLGiUyIml1ejONu/ipmeivRQCS8e1WY4QrRAw8LqhR57axWtJJbtsrPHiushWeAKKGHW6n6e22iwlyzHgdSyRJIDhcY3A8BxczuV4QstRv8sRokSAhroJ9uMtLpG9wVLO72OOXZuRxa0hFiwyUb6/YIs4CzEfLm946CYMjxlETZdc6CQZ/joDBLDJlEe8dbVIw2F8bWZgQQJyNr2NSjVwPxWs0jpzEkIv5/jzkOeuTXiVKc0BccAifChCwzbZAxHa6hqM7CLL5W1UZe0JOk/3XI87COA8xBTXUzz2w6zY5V8QasNw19ulj6pDHeQi14X4m1hh+gqLEuLE6jEwH0s3ee4eRVgZXZvyy0KGxY0lSPC3veh81rZ6X3yF9IjFs4vvOPzh2M99MPg5Sx31+8/DL+Dpf0tsZalJ0VVcL+uOaFOEqDCgihtHQwC7Qw4rpYDXNJY6S2tvpcECEC9aUpkvkX8H+zLbGxQBnjXI7CIg3vdm4YkZZcYUHQgQ8qTwecoMuq7tWwAhUr4MB6MAhG3T4wTyx8g/WOQeQX4S+T2TEAIi5c3A07SSy48d/4V806Gt62Dfqe54lXuadkBMks56lXvygBjSKa9yTx4QAxLr/5e8yj15QAC8hXzaq9vTtJPLjx0fcASOkFH3IMTvMIndyHe9qj3NCiB+soBCrELtgn01SsiIf78lNvG+Rf4c+QPkn72aPc0K/SfAAAQw2tkwmpGbAAAAAElFTkSuQmCC"},CGuk:function(e,t){},CmAJ:function(e,t){},"Ew/8":function(e,t){},Fa0r:function(e,t){},IIwT:function(e,t){},Jrny:function(e,t){},KS9L:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),r={name:"DwNavMenu",data:function(){return{defActive:"/dw/survey"}},watch:{$route:function(e,t){this.setDefActive()}},mounted:function(){this.setDefActive()},methods:{handleSelect:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},setDefActive:function(){var e=this.$route.fullPath;e.indexOf("/dw/survey")>=0?this.defActive="/dw/survey":e.indexOf("/dw/admin/user")>=0?this.defActive="/dw/admin/user":e.indexOf("/dw/user")>=0&&(this.defActive="/dw/user")}}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-menu",{staticClass:"dw-menu-height dw-menu",attrs:{"default-active":this.defActive,mode:"horizontal","background-color":"#34495e","text-color":"#fff","active-text-color":"#409eff",router:""},on:{select:this.handleSelect}},[t("el-menu-item",{attrs:{index:"/dw/survey"}},[this._v("我的问卷")]),this._v(" "),t("el-menu-item",{attrs:{index:"/dw/user"}},[this._v("个人中心")]),this._v(" "),t("el-menu-item",{directives:[{name:"has-dw-role",rawName:"v-has-dw-role",value:"DWSURVEY_SUPER_ADMIN",expression:"'DWSURVEY_SUPER_ADMIN'"}],attrs:{index:"/dw/admin/user"}},[this._v("用户管理")])],1)},staticRenderFns:[]};var i=s("VU/8")(r,n,!1,function(e){s("Jrny")},"data-v-5a31d596",null).exports,o=s("mvHQ"),l=s.n(o),u={setUserName:function(e){localStorage.setItem("dw_oss_user_name",e)},getUserName:function(){return localStorage.hasOwnProperty("dw_oss_user_name")?localStorage.getItem("dw_oss_user_name"):"none"},setAuthority:function(e){var t="string"==typeof e?[e]:e;localStorage.setItem("dw_oss_authority",l()(t))},getAuthority:function(){var e=[];if(localStorage.hasOwnProperty("dw_oss_authority")){var t=localStorage.getItem("dw_oss_authority");try{t&&(e=JSON.parse(t))}catch(s){e=t}if("string"==typeof e)return[e]}return e}},d=s("//Fk"),c=s.n(d),v=s("mtWM"),p=s.n(v),m=s("zL8q"),f=s.n(m);function y(e){Object(m.Message)({message:e,type:"error",duration:5e3})}function h(){m.MessageBox.confirm("未登录状态，是否重新登录","系统提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){window.location.href="/#/login"}).catch(function(){})}function w(){m.MessageBox.confirm("账号没有相关操作权限","系统提示",{confirmButtonText:"确认",showCancelButton:!1,showClose:!1,type:"warning"}).then(function(){window.location.href="/#/"}).catch(function(){})}p.a.defaults.timeout=1e4,p.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";var g=p.a.create({timeout:1e4});g.interceptors.request.use(function(e){return e},function(e){return console.log("request-error:"+e),c.a.error(e)}),g.interceptors.response.use(function(e){if(console.debug("response"),console.debug(e),200===e.status){var t=e.data;if(t.hasOwnProperty("resultCode"))if(401===t.resultCode)h();else if(403===t.resultCode)w();else if(200!==t.resultCode){var s="异常码："+t.resultCode;t.hasOwnProperty("resultMsg")&&(s=t.resultMsg+"，异常码："+t.resultCode),y(s)}return c.a.resolve(e)}return c.a.reject(e)},function(e){console.log("err"+e);var t=e.message;if(t.includes("Network Error"))t="后端接口连接异常";else if(t.includes("timeout"))t="系统接口请求超时";else if(t.includes("Request failed with status code")){var s=t.substr(t.length-3);"401"===s||"403"===s?(t=null,"401"===s?h():"403"===s&&w()):t="系统接口"+t.substr(t.length-3)+"异常"}return null!=t&&y(t),c.a.reject(e)});var _=g,b={loginIn:"/api/dwsurvey/anon/security/login-pwd.do",logOut:"/api/dwsurvey/anon/security/logout.do",surveyList:"/api/dwsurvey/app/survey/list.do",surveyInfo:"/api/dwsurvey/app/survey/info.do",surveyUpdate:"/api/dwsurvey/app/survey/survey-base-attr.do",surveyCreate:"/api/dwsurvey/app/survey/add.do",surveyUpState:"/api/dwsurvey/app/survey/up-survey-status.do",surveyCopy:"/api/dwsurvey/app/survey/copy.do",surveyDelete:"/api/dwsurvey/app/survey/delete.do",surveyReport:"/api/dwsurvey/app/stats/report.do",surveyAnswerList:"/api/dwsurvey/app/answer/list.do",surveyAnswerInfo:"/api/dwsurvey/app/answer/info.do",surveyAnswerExport:"/api/dwsurvey/app/answer/export-xls.do",surveyAnswerDelete:"/api/dwsurvey/app/answer/delete.do",surveyFooterInfo:"/api/dwsurvey/anon/web/footer-info.do",adminUserList:"/api/dwsurvey/admin/user/list.do",adminUserCreate:"/api/dwsurvey/admin/user/add.do",adminUserUpdate:"/api/dwsurvey/admin/user/edit.do",adminUserDelete:"/api/dwsurvey/admin/user/delete.do",curUserInfo:"/api/dwsurvey/app/user/currentUser.do",curUserPwdUpdate:"/api/dwsurvey/app/user/up-pwd.do"};var C={name:"DwHeader",components:{"dw-nav-menu":i},data:function(){return{userName:"dwsurvey"}},mounted:function(){this.userName=u.getUserName()},methods:{handleCommand:function(e){var t=this;"logout"===e?_({url:b.logOut,method:"post"}).then(function(){t.$router.push("/login")}):"myAccount"===e?this.$router.push("/dw/user"):"updatePwd"===e&&this.$router.push("/dw/user/pwd")}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-row",{staticStyle:{"background-color":"#34495e",opacity:"0.85"}},[a("el-col",{attrs:{span:20,offset:2}},[a("div",{staticClass:"dw-header-main"},[a("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{attrs:{span:4}},[a("a",{attrs:{href:"/#/"}},[a("el-image",{attrs:{src:s("7Otq")}}),e._v(" "),a("span",{staticStyle:{color:"#ffa71d","font-size":"14px",position:"absolute","margin-left":"10px"}},[e._v("OSS")])],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticStyle:{"padding-left":"60px"}},[a("dw-nav-menu")],1)]),e._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[a("div",[a("el-dropdown",{on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n                    "+e._s(e.userName)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"myAccount"}},[e._v("我的账号")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"updatePwd"}},[e._v("修改密码")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出登录")])],1)],1)],1)])],1)],1)])],1)],1)])},staticRenderFns:[]};var S=s("VU/8")(C,x,!1,function(e){s("IIwT")},"data-v-e08f3512",null).exports,k={name:"DwHeaderLogin",components:{"dw-nav-menu":i}},D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this._m(0),this._v(" "),t("div",[t("el-row",{staticStyle:{"background-color":"#34495e",opacity:"0.85"}},[t("el-col",{attrs:{span:20,offset:2}},[t("div",{staticClass:"dw-header-main"},[t("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[t("el-col",{attrs:{span:4}},[t("a",{attrs:{href:"/#/"}},[t("el-image",{attrs:{src:s("7Otq")}})],1)]),this._v(" "),t("el-col",{attrs:{span:16}},[t("div",{staticStyle:{"padding-left":"60px",color:"white"}},[this._v("DWSurvey OSS 社区版 - Vue")])]),this._v(" "),t("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t("div",[t("div",{staticStyle:{height:"80px","line-height":"80px"}},[t("el-button",{attrs:{type:"primary"}},[this._v("登录")])],1)])])],1)],1)])],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"m-logbg"},[t("img",{staticStyle:{"margin-top":"0px","margin-left":"0px",opacity:"1"},attrs:{src:"http://localhost:8181/diaowen/images/style-model/login_bg/1.jpg",width:"100%"}})])])}]};var I=s("VU/8")(k,D,!1,function(e){s("1ghF")},"data-v-723f58f0",null).exports,A={name:"DwFooter",data:function(){return{footerInfo:{siteName:"调问网",siteUrl:"http://www.diaowen.net",siteIcp:"京ICP备13050030号-3",siteMail:"service@diaowen.net",sitePhone:"18888888888",versionInfo:"DWSurvey OSS V5.0 Vue",versionNumber:"OSS V5.0",versionBuilt:"20211128",years:"2012-2021"}}},mounted:function(){this.queryDWSurveyFooter()},methods:{queryDWSurveyFooter:function(){var e=this;this.axios.get(b.surveyFooterInfo,{}).then(function(t){var s=t.data.data;console.debug(s),e.footerInfo=s})}}},F={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dw-footer-main"},[s("div",[s("span",[s("a",{staticStyle:{color:"#333"},attrs:{href:e.footerInfo.siteUrl}},[s("strong",[e._v(e._s(e.footerInfo.siteName))])]),e._v(" ")]),e._v(" "),s("span",[s("a",{staticStyle:{"text-decoration":"none",color:"#333"},attrs:{href:"/"}},[e._v(e._s(e.footerInfo.siteIcp))]),e._v(" "+e._s(e.footerInfo.siteMail)+" "+e._s(e.footerInfo.sitePhone))])]),e._v(" "),s("div",[s("span",[e._v("Powered by "),e._m(0),e._v(" "+e._s(e.footerInfo.versionNumber)+" Vue ")]),e._v(" "),s("span",[e._v(" © "+e._s(e.footerInfo.years)+" "),e._m(1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"www.diaowen.net"}},[t("strong",[this._v("DWSurvey")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"www.diaowen.net"}},[t("strong",[this._v("调问网")])])}]};var q=s("VU/8")(A,F,!1,function(e){s("CmAJ")},"data-v-db1f53a0",null).exports,N={name:"App",components:{"dw-nav-menu":i,"dw-header":S,"dw-header-login":I,"dw-footer":q},data:function(){return{currentHeader:"dw-header"}},mounted:function(){this.loginStatus()},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},T={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var U=s("VU/8")(N,T,!1,function(e){s("g3U5")},null,null).exports,L=s("/ocq"),R={name:"Layout",components:{"dw-nav-menu":i,"dw-header":S,"dw-header-login":I,"dw-footer":q},data:function(){return{currentHeader:"dw-header"}},mounted:function(){this.loginStatus()},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},E={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"dw-layout"}},[t("el-container",{staticStyle:{padding:"0px"}},[t("el-header",{staticStyle:{padding:"0px"},attrs:{height:"80"}},[t("dw-header")],1),this._v(" "),t("el-container",{staticStyle:{"z-index":"1"}},[t("el-container",[t("el-main",{staticStyle:{padding:"20px 0px"}},[t("router-view")],1),this._v(" "),t("el-footer",[t("dw-footer")],1)],1)],1)],1)],1)},staticRenderFns:[]};var M=s("VU/8")(R,E,!1,function(e){s("tef8")},"data-v-839bdc8e",null).exports,O={name:"LoginLayout",components:{"dw-nav-menu":i,"dw-header":S,"dw-header-login":I,"dw-footer":q},data:function(){return{currentHeader:"dw-header",pageH:"600px"}},mounted:function(){this.loginStatus(),this.pageH=window.innerHeight+"px"},methods:{loginStatus:function(){this.$route.fullPath.indexOf("login")>=0?this.currentHeader="dw-header-login":this.currentHeader="dw-header"}}},P={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-layout-body",style:{height:this.pageH},attrs:{id:"dw-layout"}},[t("el-container",{staticStyle:{padding:"0px"}},[t("el-header",{staticStyle:{padding:"0px"},attrs:{height:"80"}},[t("dw-header-login")],1),this._v(" "),t("el-container",{staticStyle:{"z-index":"1"}},[t("el-container",[t("el-main",{staticStyle:{padding:"20px 0px"}},[t("router-view")],1),this._v(" "),t("el-footer",{staticClass:"dw-footer-container",attrs:{height:"80"}},[t("dw-footer")],1)],1)],1)],1)],1)},staticRenderFns:[]};var $=s("VU/8")(O,P,!1,function(e){s("CGuk")},"data-v-075ed790",null).exports,B={name:"NoTopLayout",components:{"dw-nav-menu":i,"dw-header":S,"dw-header-login":I,"dw-footer":q},data:function(){return{currentHeader:"dw-header"}},mounted:function(){},methods:{}},V={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"dw-layout"}},[t("el-container",{staticStyle:{padding:"0px"}},[t("el-container",{staticStyle:{"z-index":"1"}},[t("el-container",[t("el-main",{staticStyle:{padding:"0px"}},[t("router-view")],1),this._v(" "),t("el-footer",[t("dw-footer")],1)],1)],1)],1)],1)},staticRenderFns:[]};var z=s("VU/8")(B,V,!1,function(e){s("YXH3")},null,null).exports,H={name:"DwAnswer",mounted:function(){this.loadAnswer()},methods:{loadAnswer:function(){var e=this.$route.params.sid;window.location.href="/static/diaowen/answer-p.html?sid="+e}}},W={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("问卷加载中")])},staticRenderFns:[]};var G=s("VU/8")(H,W,!1,function(e){s("UTC3")},"data-v-56813a4f",null).exports;function Q(e){var t={id:e};return _({url:b.surveyInfo,method:"get",params:t})}var j={name:"SurveyList",data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,dialogTitle:"创建问卷",formInline:{surveyName:null,surveyState:null},dialogFormVisible:!1,form:{name:"",id:null},formLabelWidth:"120px"}},mounted:function(){this.queryList(1)},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},handleCopy:function(e,t){console.log(e,t),this.form.id=t.id,void 0!==t.surveyNameText&&null!==t.surveyNameText?this.form.name=""+t.surveyNameText:this.form.name="复制问卷标题",this.dialogFormVisible=!0,this.dialogTitle="复制问卷"},handleDelete:function(e,t){var s=this;this.$msgbox.confirm("确认删除此问卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){(function(e){return _({url:b.surveyDelete,method:"delete",data:e})})({id:[t.id]}).then(function(e){console.log(e),200===e.data.resultCode?(s.$message.success("删除成功，即将刷新数据。"),s.queryList(1)):s.$message.error("删除问卷失败")})}).catch(function(){})},onSubmit:function(){console.log("submit!"),this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},queryList:function(e){var t=this,s=this.formInline,a=s.surveyName,r=s.surveyState;(function(e,t,s,a){var r={pageSize:e,current:t,surveyName:s,surveyState:a};return _({url:b.surveyList,method:"get",params:r})})(this.pageSize,e,a,r).then(function(e){var s=e.data.data;t.tableData=s,t.total=e.data.total,t.currentPage=e.data.current,t.pageSize=e.data.pageSize})},handleDialogConfirm:function(){null===this.form.id?this.createSurvey():this.copySurvey(this.form.id)},createSurvey:function(){var e=this;(function(e){return _({url:b.surveyCreate,method:"post",data:e})})({surveyName:this.form.name}).then(function(t){var s=t.data,a=s.data;200===s.resultCode?(e.dialogFormVisible=!1,e.$confirm("问卷创建成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(e){e.value;window.location.href="/static/diaowen/design.html?surveyId="+a.id}).catch(function(){e.queryList(1)})):e.$message.error("创建问卷失败")})},copySurvey:function(e){var t,s,a,r=this;(t=e,s=this.form.name,a={fromSurveyId:t,surveyName:s,tag:"2"},_({url:b.surveyCopy,method:"post",params:a})).then(function(e){var t=e.data,s=t.data;200===t.resultCode?(r.dialogFormVisible=!1,r.$confirm("问卷复制成功，点击“继续编辑问卷”进入问卷编辑。","系统提示",{confirmButtonText:"继续编辑问卷"}).then(function(e){e.value;window.location.href="/static/diaowen/design.html?surveyId="+s.id}).catch(function(){r.queryList(1)})):r.$message.error("问卷复制失败")})}}},Z={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-table-form",staticStyle:{"padding-left":"60px"}},[s("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[s("el-form-item",{attrs:{label:"问卷标题"}},[s("el-input",{attrs:{placeholder:"请输入查询的问卷标题",clearable:""},model:{value:e.formInline.surveyName,callback:function(t){e.$set(e.formInline,"surveyName",t)},expression:"formInline.surveyName"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"问卷状态"}},[s("el-select",{attrs:{placeholder:"请选择问卷状态",clearable:""},model:{value:e.formInline.surveyState,callback:function(t){e.$set(e.formInline,"surveyState",t)},expression:"formInline.surveyState"}},[s("el-option",{attrs:{label:"设计中",value:"0"}}),e._v(" "),s("el-option",{attrs:{label:"收集中",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"收集结束",value:"2"}})],1)],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"}},[s("el-button",{on:{click:e.onSubmit}},[e._v("重置")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-table"},[s("div",{staticClass:"dw-table-title"},[s("el-row",{attrs:{span:24,type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("h3",[e._v("我的问卷")])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.form.id=null,e.form.name=null,e.dialogTitle="创建问卷",e.dialogFormVisible=!0}}},[e._v("新建问卷")])],1)],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"问卷"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{domProps:{innerHTML:e._s(t.row.surveyName)}}),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[null!=t.row.surveyNameText?s("div",{domProps:{textContent:e._s(t.row.surveyNameText)}}):s("div",{domProps:{innerHTML:e._s(t.row.surveyName)}})])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"答卷数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(null!=t.row.answerNum?t.row.answerNum:0)+" 份")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.surveyState?s("el-tag",[e._v("设计中")]):1===t.row.surveyState?s("el-tag",{attrs:{type:"success"}},[e._v("收集中")]):2===t.row.surveyState?s("el-tag",{attrs:{type:"info"}},[e._v("收集结束")]):s("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{staticClass:"el-icon-time"}),e._v(" "),s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createDate))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[s("el-tooltip",{attrs:{effect:"dark",content:"编辑问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",content:"编辑问卷",icon:"el-icon-edit"},on:{click:function(s){return e.buttonClickA("/static/diaowen/design.html?surveyId="+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"答卷地址",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-share"},on:{click:function(s){return e.handlePush("/dw/survey/c/url/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"答卷数据",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-s-data"},on:{click:function(s){return e.handlePush("/dw/survey/d/chart/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"预览问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(s){return e.buttonClickA("/static/diaowen/preview.html?surveyId="+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"复制问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-copy-document"},on:{click:function(s){return e.handleCopy(t.$index,t.row)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"删除问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),s("div",{staticClass:"dw-pagination"},[s("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),s("div",[s("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{attrs:{model:e.form,"label-position":"top"}},[s("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"问卷标题"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入问卷标题"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var X=s("VU/8")(j,Z,!1,function(e){s("f6Xx")},"data-v-2a001fa8",null).exports,Y={name:"DwSurveyDcsWrapper",props:{id:{type:String,default:""},isAnswerUrl:{type:Boolean,default:!1},isSurveySet:{type:Boolean,default:!1},isSiteShare:{type:Boolean,default:!1},isSiteComp:{type:Boolean,default:!1},isAnswerWx:{type:Boolean,default:!1},isSurveyChart:{type:Boolean,default:!1},isAnswerData:{type:Boolean,default:!1},isSurveyLog:{type:Boolean,default:!1},isAnswerLog:{type:Boolean,default:!1}},data:function(){return{survey:{sid:"",answerUrl:"",answerUrl1:"",answerUrlQR:"",siteCompCodeRoot:"",surveyState:""},prevPath:"/dw"}},mounted:function(){console.debug(Object({NODE_ENV:"production",DW_API_URL:"http://localhost:8081",DW_WEB_URL:"http://localhost:8081"})),this.getSurveyInfo()},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},surveyStateChange:function(){var e,t,s,a=this;console.debug(this.survey.surveyState),(e=this.$route.params.id,t=this.survey.surveyState,s={surveyId:e,surveyState:t},_({url:b.surveyUpState,method:"post",params:s})).then(function(e){200===e.data.resultCode?a.$message.success("问卷状态设置成功"):a.$message.error("问卷状态设置失败")})},getSurveyInfo:function(){var e=this;Q(this.$route.params.id).then(function(t){var s=t.data.data;e.survey=s,e.survey.answerUrl=location.origin+"/#/diaowen/"+e.survey.sid,e.survey.answerUrlQR="/api/dwsurvey/anon/response/answerTD.do?surveyId="+e.survey.id,e.survey.answerUrl1=location.origin+"/static/diaowen/answer-p.html?sid="+e.survey.sid,e.survey.siteCompCodeRoot='<div id="dwsurveyWebAnswerCompCode"><div id="dwsurveyWebSiteFixed" style="position: fixed; right: 0px; left: auto; top: 520px; z-index: 99999;"><a target=\'_blank\' id="dwsurveyWebSiteFixedA" href="'+e.survey.answerUrl+'" style="background-color: rgb(24, 144, 255); width: 15px; display: block; padding: 10px 6px 10px 10px; color: white; cursor: pointer; float: right; vertical-align: middle; text-decoration: none; font-size: 12px; box-sizing: content-box; line-height: 20px;">问卷调查</a></div></div>',e.survey.surveyDetail.effective=1===s.surveyDetail.effective,e.survey.surveyDetail.effectiveIp=1===s.surveyDetail.effectiveIp,e.survey.surveyDetail.refresh=1===s.surveyDetail.refresh,e.survey.surveyDetail.rule=1===s.surveyDetail.rule,e.survey.surveyDetail.ynEndNum=1===s.surveyDetail.ynEndNum,e.survey.surveyDetail.ynEndTime=1===s.surveyDetail.ynEndTime})}}},J={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-dcs-main"},[s("div",{staticClass:"dw-dcs-main-survey-title"},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",[s("div",{staticClass:"dw-dcs-main-survey-title-content"},[null!=e.survey.surveyNameText?s("div",{domProps:{textContent:e._s(e.survey.surveyNameText)}}):s("div",{domProps:{innerHTML:e._s(e.survey.surveyName)}})])]),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-select",{attrs:{value:e.survey.surveyState,placeholder:"请选择"},on:{change:e.surveyStateChange},model:{value:e.survey.surveyState,callback:function(t){e.$set(e.survey,"surveyState",t)},expression:"survey.surveyState"}},[s("el-option",{key:"0",attrs:{value:0,label:"设计中"}}),e._v(" "),s("el-option",{key:"1",attrs:{value:1,label:"发布收集"}}),e._v(" "),s("el-option",{key:"2",attrs:{value:2,label:"收集结束"}})],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-survey-step"},[s("div",{staticClass:"dw-dcs-main-survey-step-item",staticStyle:{padding:"13px 16px"}},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link dw-link-1",attrs:{to:"/"}},[s("i",{staticClass:"el-icon-edit"}),e._v("问卷设计")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isAnswerUrl||e.isSurveySet||e.isSiteShare||e.isSiteComp||e.isAnswerWx},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[s("i",{staticClass:"el-icon-link"}),e._v("问卷收集")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link dw-link-1",class:{"dw-link-primary":e.isSurveyChart||e.isAnswerData},attrs:{to:e.prevPath+"/survey/d/chart/"+e.survey.id}},[s("i",{staticClass:"el-icon-s-data"}),e._v("问卷数据")])],1),e._v(" "),s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:15}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.buttonClickA("/static/diaowen/design.html?surveyId="+e.survey.id)}}},[e._v("问卷设计")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handlePush(e.prevPath+"/survey/c/url/"+e.survey.id)}}},[e._v("答卷地址")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-survey-step-item",staticStyle:{"padding-left":"16px"}},[s("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isAnswerUrl||e.isSurveySet||e.isSiteShare||e.isSiteComp||e.isAnswerWx,expression:"isAnswerUrl || isSurveySet || isSiteShare || isSiteComp || isAnswerWx"}]},[s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerUrl},attrs:{to:e.prevPath+"/survey/c/url/"+e.survey.id}},[s("i",{staticClass:"el-icon-link"}),e._v("答卷地址")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSurveySet},attrs:{to:e.prevPath+"/survey/c/attr/"+e.survey.id}},[s("i",{staticClass:"el-icon-setting"}),e._v("答卷设置")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSiteComp},attrs:{to:e.prevPath+"/survey/c/comp/"+e.survey.id}},[s("i",{staticClass:"el-icon-discount"}),e._v("网站组件")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerWx},attrs:{to:e.prevPath+"/survey/c/weixin/"+e.survey.id}},[s("i",{staticClass:"el-icon-chat-dot-round"}),e._v("微信收集")])],1)],1),e._v(" "),s("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isSurveyChart||e.isAnswerData,expression:"isSurveyChart || isAnswerData"}]},[s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isSurveyChart},attrs:{to:e.prevPath+"/survey/d/chart/"+e.survey.id}},[s("i",{staticClass:"el-icon-discount"}),e._v("默认统计")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("router-link",{staticClass:"dw-link",class:{"dw-link-primary":e.isAnswerData},attrs:{to:e.prevPath+"/survey/d/data/"+e.survey.id}},[s("i",{staticClass:"el-icon-receiving"}),e._v("原始数据")])],1),e._v(" "),s("el-col",{attrs:{span:3}}),e._v(" "),s("el-col",{attrs:{span:3}})],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-survey-step-item dw-dcs-main-survey-step-item-status"},[s("el-row",{attrs:{type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("div",[e._v("状态：\n                  "),0===e.survey.surveyState?s("el-tag",{attrs:{size:"mini"}},[e._v("设计中")]):1===e.survey.surveyState?s("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("收集中")]):2===e.survey.surveyState?s("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("收集结束")]):s("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":"",size:"mini"}},[e._v("未知")])],1)]),e._v(" "),s("el-col",{attrs:{span:4}},[s("div",[e._v("收集数："+e._s(null!=e.survey.answerNum?e.survey.answerNum:0)+" 份")])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[e._v("\n                创建时间："+e._s(e.survey.createDate)+"\n              ")])],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-survey-step-main"},[e._t("dw-dcs-main-slot",null,{survey:e.survey})],2)])])])],1)],1)},staticRenderFns:[]};var K=s("VU/8")(Y,J,!1,function(e){s("q3Mn")},"data-v-2e605e22",null).exports,ee={name:"DwSurveyAttr",components:{DwSurveyDcsWrapper:K},data:function(){return{labelPosition:"right",value1:"",survey:{surveyDetail:{effective:!1,effectiveIp:!1}},form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},mounted:function(){this.getSurveyInfo()},methods:{getSurveyInfo:function(){var e=this;Q(this.$route.params.id).then(function(t){var s=t.data.data;e.survey=s,e.survey.surveyDetail.effective=1===s.surveyDetail.effective,e.survey.surveyDetail.effectiveIp=1===s.surveyDetail.effectiveIp,e.survey.surveyDetail.refresh=1===s.surveyDetail.refresh,e.survey.surveyDetail.rule=1===s.surveyDetail.rule,e.survey.surveyDetail.ynEndNum=1===s.surveyDetail.ynEndNum,e.survey.surveyDetail.endNum=s.surveyDetail.endNum,e.survey.surveyDetail.ynEndTime=1===s.surveyDetail.ynEndTime})},onSubmit:function(){var e=this;console.log("submit!");var t=this.survey.surveyDetail,s={dirId:t.dirId,effective:t.effective?1:0,effectiveIp:t.effectiveIp?1:0,refresh:t.refresh?1:0,rule:t.rule?1:0,ynEndNum:t.ynEndNum?1:0,ynEndTime:t.ynEndTime?1:0,endNum:t.endNum,endTime:t.endTime};console.log(s),function(e){return _({url:b.surveyUpdate,method:"put",data:e})}(s).then(function(t){console.log(t);var s=t.data;200===s.resultCode?e.$message({type:"success",message:"保存成功"}):e.$message({type:"error",message:s.resultMsg})})}}},te={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{"is-survey-set":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(){return[s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("问卷属性设置")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("配置问卷答卷时的收集规则")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("div",{staticStyle:{padding:"0px 30px"}},[s("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,model:e.form}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("h5",[e._v("回答限制")]),e._v(" "),s("div",{staticStyle:{"padding-left":"10px"}},[s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.effective,callback:function(t){e.$set(e.survey.surveyDetail,"effective",t)},expression:"survey.surveyDetail.effective"}},[e._v("每台电脑或手机只能答一次")])],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.effectiveIp,callback:function(t){e.$set(e.survey.surveyDetail,"effectiveIp",t)},expression:"survey.surveyDetail.effectiveIp"}},[e._v("每个IP只能答一次")])],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.refresh,callback:function(t){e.$set(e.survey.surveyDetail,"refresh",t)},expression:"survey.surveyDetail.refresh"}},[e._v("有重复回答启用验证码")])],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.rule,callback:function(t){e.$set(e.survey.surveyDetail,"rule",t)},expression:"survey.surveyDetail.rule"}},[e._v("启用访问密码，设置密码")]),e._v(" "),s("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入内容"},model:{value:e.survey.surveyDetail.ruleCode,callback:function(t){e.$set(e.survey.surveyDetail,"ruleCode",t)},expression:"survey.surveyDetail.ruleCode"}})],1)],1)]),e._v(" "),s("el-col",{attrs:{span:12}},[s("h5",[e._v("何时结束")]),e._v(" "),s("div",{staticStyle:{"padding-left":"10px"}},[s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.ynEndNum,callback:function(t){e.$set(e.survey.surveyDetail,"ynEndNum",t)},expression:"survey.surveyDetail.ynEndNum"}},[e._v("收集到\n                        "),s("el-input-number",{attrs:{min:1,max:1e5,label:"份数","controls-position":"right"},model:{value:e.survey.surveyDetail.endNum,callback:function(t){e.$set(e.survey.surveyDetail,"endNum",t)},expression:"survey.surveyDetail.endNum"}}),e._v("\n                        份时结束")],1)],1),e._v(" "),s("el-form-item",[s("el-checkbox",{model:{value:e.survey.surveyDetail.ynEndTime,callback:function(t){e.$set(e.survey.surveyDetail,"ynEndTime",t)},expression:"survey.surveyDetail.ynEndTime"}},[e._v("时间到\n                        "),s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.survey.surveyDetail.endTime,callback:function(t){e.$set(e.survey.surveyDetail,"endTime",t)},expression:"survey.surveyDetail.endTime"}}),e._v("\n                        时结束\n                      ")],1)],1)],1)])],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" 保存修改 ")]),e._v(" "),s("el-button",[e._v("取消")])],1)],1)],1)])])]},proxy:!0}])})],1)},staticRenderFns:[]};var se=s("VU/8")(ee,te,!1,function(e){s("ZRT9")},"data-v-7e86bbe2",null).exports,ae=s("TQvf"),re=s.n(ae),ne={name:"DwAnswerUrlMain",components:{Clipboard:re.a},props:{survey:{type:Object,default:function(){}}},methods:{downloadAnswerImg:function(e){console.debug(e),window.location.href=e},copyActiveCode:function(e,t){var s=this;console.debug(this.survey);var a=new re.a(e.target,{text:function(){return t}});a.on("success",function(e){s.$message({type:"success",message:"复制成功"}),a.off("error"),a.off("success"),a.destroy()}),a.on("error",function(e){s.$message({type:"warning",message:"该浏览器不支持自动复制"}),a.off("error"),a.off("success"),a.destroy()}),a.onClick(e)}}},ie={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[e._m(0),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[e._m(1),e._v(" "),s("el-input",{staticStyle:{width:"500px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:e.survey.answerUrl,callback:function(t){e.$set(e.survey,"answerUrl",t)},expression:"survey.answerUrl"}}),e._v(" "),s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.survey.answerUrl)}}},[e._v("复制地址")]),e._v(" "),s("el-link",{attrs:{href:e.survey.answerUrl,underline:!1,target:"_blank"}},[s("el-button",{staticStyle:{"border-bottom-left-radius":"0px","border-top-left-radius":"0px"},attrs:{icon:"el-icon-link"}},[e._v("打开问卷")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[e._m(2),e._v(" "),s("el-input",{staticStyle:{width:"500px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:e.survey.answerUrl1,callback:function(t){e.$set(e.survey,"answerUrl1",t)},expression:"survey.answerUrl1"}}),e._v(" "),s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.survey.answerUrl1)}}},[e._v("复制地址")]),e._v(" "),s("el-link",{attrs:{href:e.survey.answerUrl1,underline:!1,target:"_blank"}},[s("el-button",{staticStyle:{"border-bottom-left-radius":"0px","border-top-left-radius":"0px"},attrs:{icon:"el-icon-link"}},[e._v("打开问卷")])],1)],1)],1)]),e._v(" "),s("div",[e._m(3),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:e.survey.answerUrlQR}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n              加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downloadAnswerImg(e.survey.answerUrlQR+"&down=1")}}},[e._v("下载二维码")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("答卷地址")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("复制下面的问卷链接到QQ，Email等工具中直接发给被用户")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("div",{staticClass:"dw-dcs-main-p"},[this._v("简短地址：此地址只支持现代浏览器")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("div",{staticClass:"dw-dcs-main-p"},[this._v("\n          兼容地址：此地址支持所有浏览器中使用，如IE等。\n        ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("二维码地址")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("通过手机扫一扫，或下载二维码，即可进行问卷数据收集。")])])}]};var oe={name:"DwAnswerUrl",components:{DwSurveyDcsWrapper:K,DwAnswerUrlMain:s("VU/8")(ne,ie,!1,function(e){s("Fa0r")},"data-v-3c1b10bc",null).exports}},le={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{id:e.id,"is-answer-url":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var a=t.survey;return[a?s("dw-answer-url-main",{attrs:{survey:a}}):e._e()]}}])})],1)},staticRenderFns:[]},ue=s("VU/8")(oe,le,!1,null,null,null).exports,de={name:"DwSiteComp",components:{DwSurveyDcsWrapper:K,Clipboard:re.a},data:function(){return{color1:"#409EFF",color2:"#FFFFFF",value:60,radio:"右边",siteCompCode:'<div id="dwsurveyWebSiteFixed" style="position: fixed; right: 0px; left: auto; top: 520px; z-index: 99999;"><a target=\'_blank\' id="dwsurveyWebSiteFixedA" href="" style="background-color: rgb(24, 144, 255); width: 15px; display: block; padding: 10px 6px 10px 10px; color: white; cursor: pointer; float: right; vertical-align: middle; text-decoration: none; font-size: 12px; box-sizing: content-box; line-height: 20px;">问卷调查</a></div>'}},methods:{copyActiveCode:function(e,t){var s=this,a=document.getElementById("dwsurveyWebAnswerCompCode");this.siteCompCode=a.innerHTML;var r=new re.a(e.target,{text:function(){return s.siteCompCode}});r.on("success",function(e){s.$message({type:"success",message:"复制成功"}),r.off("error"),r.off("success"),r.destroy()}),r.on("error",function(e){s.$message({type:"waning",message:"该浏览器不支持自动复制"}),r.off("error"),r.off("success"),r.destroy()}),r.onClick(e)},handleSlider:function(e){var t=window.innerHeight-10*e;t<0&&(t=0);var s=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixed").style.top=t+"px",console.debug(s.innerHTML),this.siteCompCode=s.innerHTML},handleLRButton:function(e){console.debug(e);var t=document.getElementById("dwsurveyWebAnswerCompCode"),s=document.getElementById("dwsurveyWebSiteFixed");"左边"===e?(s.style.left="0px",s.style.right="auto"):(s.style.left="auto",s.style.right="0px"),console.debug(t.innerHTML),this.siteCompCode=t.innerHTML},handleBgColor:function(e){var t=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixedA").style.backgroundColor=e,console.debug(t.innerHTML),this.siteCompCode=t.innerHTML},handleTextColor:function(e){var t=document.getElementById("dwsurveyWebAnswerCompCode");document.getElementById("dwsurveyWebSiteFixedA").style.color=e,console.debug(t.innerHTML),this.siteCompCode=t.innerHTML}}},ce={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{"is-site-comp":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var a=t.survey;return[s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("通过网站挂件快速收集问卷")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("复制右边生成的挂件代码，放入网站Footer页中即可实现全站带有答卷挂件。")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"})]),e._v(" "),s("div",[s("el-row",[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"site-comp-left"},[s("div",{staticClass:"site-comp-left-title"},[e._v("风格设置")]),e._v(" "),s("div",[s("el-row",[s("el-col",{attrs:{span:16}},[s("div",{staticClass:"dw-c-from-item"},[e._v("挂件位置：\n                      "),s("el-radio-group",{attrs:{size:"small"},on:{change:function(t){return e.handleLRButton(t)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[s("el-radio-button",{attrs:{label:"左边"}}),e._v(" "),s("el-radio-button",{attrs:{label:"右边"}})],1)],1),e._v(" "),s("div",{staticClass:"dw-c-from-item dw-c-from-item-color"},[s("span",[e._v("背景颜色：")]),e._v(" "),s("el-color-picker",{on:{"active-change":function(t){return e.handleBgColor(t)}},model:{value:e.color1,callback:function(t){e.color1=t},expression:"color1"}})],1),e._v(" "),s("div",{staticClass:"dw-c-from-item dw-c-from-item-color"},[s("span",[e._v("文字颜色：")]),e._v(" "),s("el-color-picker",{on:{"active-change":function(t){return e.handleTextColor(t)}},model:{value:e.color2,callback:function(t){e.color2=t},expression:"color2"}})],1)]),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-c-from-item"},[s("div",[e._v("挂件高度：")]),e._v(" "),s("div",{staticStyle:{"margin-top":"15px"}},[s("el-slider",{attrs:{vertical:"",height:"200px"},on:{input:e.handleSlider},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),s("div",{staticStyle:{"padding-top":"15px"}},[s("el-input-number",{attrs:{min:1,max:100,"controls-position":"right",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])])],1)],1)])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"center",color:"rgb(211, 211, 211)"},attrs:{span:2}},[s("i",{staticClass:"el-icon-right"})]),e._v(" "),s("el-col",{attrs:{span:14}},[s("div",{staticClass:"site-comp-right"},[s("div",[s("el-input",{attrs:{autosize:{minRows:2,maxRows:8},type:"textarea",placeholder:"请输入内容",disabled:""},model:{value:e.siteCompCode,callback:function(t){e.siteCompCode=t},expression:"siteCompCode"}})],1),e._v(" "),s("div",{staticStyle:{"padding-top":"10px"}},[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,e.siteCompCode)}}},[e._v("复制挂件代码")])],1)])])],1),e._v(" "),s("div",{domProps:{innerHTML:e._s(a.siteCompCodeRoot)}})],1)]}}])})],1)},staticRenderFns:[]};var ve=s("VU/8")(de,ce,!1,function(e){s("+Zdd")},"data-v-13096ebc",null).exports,pe={name:"DwSiteShare",components:{DwSurveyDcsWrapper:K,Clipboard:re.a},data:function(){return{code:"http://ent.surveyform.cn/#/diaowen/wdhl2uv6e9x",src:"https://ent.surveyform.cn/api/dwsurvey/anon/response/answerTD.do?surveyId=465d3020-0880-4c37-ab09-cc40869758de"}},methods:{copyActiveCode:function(e,t){var s=this,a=new re.a(e.target,{text:function(){return t}});a.on("success",function(e){s.$message({type:"success",message:"复制成功"}),a.off("error"),a.off("success"),a.destroy()}),a.on("error",function(e){s.$message({type:"waning",message:"该浏览器不支持自动复制"}),a.off("error"),a.off("success"),a.destroy()}),a.onClick(e)}}},me={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("dw-survey-dcs-wrapper",{attrs:{"is-site-share":"true"}},[t("div",{attrs:{slot:"dw-dcs-main-slot"},slot:"dw-dcs-main-slot"},[t("div",[t("div",{staticClass:"dw-dcs-main-title"},[t("h4",[this._v("分享到社交网络")]),this._v(" "),t("div",{staticClass:"dw-dcs-main-p"},[this._v("赶快分享您的问卷到各大社交网站，让更多关注您的朋友来回答问卷。")])]),this._v(" "),t("div",{staticClass:"dw-dcs-main-content"})])])])],1)},staticRenderFns:[]};var fe=s("VU/8")(pe,me,!1,function(e){s("0xJ2")},"data-v-7a90d161",null).exports,ye={name:"DwAnswerWeixin",components:{DwSurveyDcsWrapper:K,Clipboard:re.a},data:function(){return{code:"http://ent.surveyform.cn/#/diaowen/wdhl2uv6e9x",src:"https://ent.surveyform.cn/api/dwsurvey/anon/response/answerTD.do?surveyId=465d3020-0880-4c37-ab09-cc40869758de"}},methods:{copyActiveCode:function(e,t){var s=this,a=new re.a(e.target,{text:function(){return t}});a.on("success",function(e){s.$message({type:"success",message:"复制成功"}),a.off("error"),a.off("success"),a.destroy()}),a.on("error",function(e){s.$message({type:"waning",message:"该浏览器不支持自动复制"}),a.off("error"),a.off("success"),a.destroy()}),a.onClick(e)}}},he={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{"is-answer-wx":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){var a=t.survey;return[s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("通过微信二维码发送或分享给好友")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("通过手机扫一扫，或下载二维码，发送或分享给好友，即可进行问卷数据收集。")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:a.answerUrlQR}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                  加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-download"}},[e._v("下载二维码")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p",staticStyle:{padding:"10px"}},[e._v("通过手机扫一扫，或下载二维码，即可进行问卷数据收集。")])],1)],1)],1)]),e._v(" "),s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("微信公众号分享")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("通过微信公众号，发送或分享给被访者。")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("div",{staticStyle:{"background-color":"#F1F1F1",padding:"10px"}},[s("el-row",{attrs:{type:"flex",gutter:"20",justify:"start",align:"middle"}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("1、使用微信扫一扫功能。")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_collect1.jpg"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("2、打开问卷后，点击右上角的“分享”按钮。")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_collect2.jpg"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("3、选择“发送给朋友”或“分享到朋友圈”")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_collect3.jpg"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1)],1)],1)])]),e._v(" "),s("div",[s("div",{staticClass:"dw-dcs-main-title"},[s("h4",[e._v("通过微信公众号")]),e._v(" "),s("div",{staticClass:"dw-dcs-main-p"},[e._v("复制下面的问卷链接到QQ，Email等工具中直接发给被用户")])]),e._v(" "),s("div",{staticClass:"dw-dcs-main-content"},[s("div",[s("el-input",{staticStyle:{width:"400px"},attrs:{id:"copyCodeInput",readonly:""},model:{value:a.answerUrl,callback:function(t){e.$set(a,"answerUrl",t)},expression:"survey.answerUrl"}}),e._v(" "),s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-copy-document"},on:{click:function(t){return e.copyActiveCode(t,a.answerUrl)}}},[e._v("复制地址")])],1)],1),e._v(" "),s("div",{staticStyle:{padding:"10px","background-color":"#F1F1F1","margin-top":"20px"}},[s("el-row",{attrs:{type:"flex",gutter:"20",justify:"start",align:"top"}},[s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("1、打开公众账号。")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_b_s3.png"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1),e._v(" "),s("el-col",{attrs:{span:8}},[s("div",{staticClass:"dw-dcs-main-wx-step"},[e._v("2、将链接放入公众号中确认后推送文章。")]),e._v(" "),s("el-image",{staticClass:"dw-dcs-main-img",attrs:{src:"/static/diaowen/images/img1/weixin_b_s4.jpeg"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                    加载中"),s("span",{staticClass:"dot"},[e._v("...")])])])],1)],1)],1)])])]}}])})],1)},staticRenderFns:[]};var we=s("VU/8")(ye,he,!1,function(e){s("ORmu")},"data-v-154202b4",null).exports,ge=s("Qf3D"),_e=s("XReE"),be=s("mCPF"),Ce=s("tJVo"),xe=s("S+cJ");ge.b([_e.a,be.b,be.a,xe.a,Ce.b,_e.c,_e.d,_e.b,be.c,Ce.a]);var Se={name:"DwsurveyChartsCommon",props:{question:{type:Object,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{activeName:"bar"}},mounted:function(){console.debug("this.question"),console.debug(this.question);var e=document.getElementById(this.question.id).getElementsByClassName("dwsurveyMain");this.loadChart(e[0],"bar")},methods:{handleClick:function(e,t){console.log(e,t),console.debug(this.activeName),e.$el.style.display="block";var s=e.$el.getElementsByClassName("dwsurveyMain"),a=this.activeName;this.loadChart(s[0],a)},loadChart:function(e,t){var s=ge.a(e),a=this.buildOption(this.question,t);a&&s.setOption(a)},buildOption:function(e,t){for(var s=[],a=[],r=[],n=e.quStatOptions,i=0;i<n.length;i++)s.push(n[i].optionName),a.push(n[i].anCount),r.push({value:n[i].anCount,name:n[i].optionName});console.debug(s);var o=!0;"ORDERQU"===e.quType&&(o=!1);var l=void 0;return"line"===t||"bar"===t?l={xAxis:{nameTextStyle:{},nameGap:20,axisLabel:{rotate:-10,interval:0},type:"category",data:s},yAxis:{type:"value",show:o},series:[{data:a,type:t}]}:"barY"===t?l={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01],show:o},yAxis:{type:"category",data:s},series:[{type:"bar",data:a}]}:"pie"===t&&(l={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"Access From",type:"pie",radius:"50%",data:r,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),l}}},ke={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{width:"100%"}},[s("div",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[s("span",[e._v(e._s(e.index+1)+"、")]),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.question.quTitle)}}),e._v(" "),s("span",[e._v("【"+e._s(e.question.quTypeName)+"】")])]),e._v(" "),"FILLBLANK"===e.question.quType?s("div",{staticStyle:{padding:"30px"}},[e._v("\n    填写回答："+e._s(e.question.anCount)+" 份\n  ")]):e._e(),e._v(" "),"FILLBLANK"!==e.question.quType?s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.question.quStatOptions}},[s("el-table-column",{attrs:{prop:"optionName",label:"题目选项"}}),e._v(" "),s("el-table-column",{attrs:{label:"SCORE"===e.question.quType?"占总分比例":"ORDERQU"===e.question.quType?"排名比例":"MULTIFILLBLANK"===e.question.quType?"填写比例":"频次比例",width:"330"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:e.row.percent}})]}}],null,!1,662113522)}),e._v(" "),"RADIO"===e.question.quType||"CHECKBOX"===e.question.quType?s("el-table-column",{attrs:{label:"频次",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e(),e._v(" "),"SCORE"===e.question.quType?s("el-table-column",{attrs:{label:"平均分",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("平均 "+e._s(t.row.anCount)+" 分")]}}],null,!1,3397111011)}):e._e(),e._v(" "),"ORDERQU"===e.question.quType?s("el-table-column",{attrs:{label:"排名",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("第 "+e._s(t.row.orderNum)+" 名")]}}],null,!1,1867559684)}):e._e(),e._v(" "),"MULTIFILLBLANK"===e.question.quType?s("el-table-column",{attrs:{label:"填写次数",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.anCount)+" 次")]}}],null,!1,2232316475)}):e._e()],1)],1):e._e(),e._v(" "),"FILLBLANK"!==e.question.quType?s("div",[s("el-tabs",{staticStyle:{width:"100%"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"柱状图",name:"bar"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),s("el-tab-pane",{attrs:{label:"拆线图",name:"line"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),s("el-tab-pane",{attrs:{label:"拼状图",name:"pie"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})]),e._v(" "),s("el-tab-pane",{attrs:{label:"条形图",name:"barY"}},[s("div",{staticClass:"dwsurveyMain",staticStyle:{width:"100%",height:"400px"}})])],1)],1):e._e()])},staticRenderFns:[]};var De={name:"DwSurveyCharts",components:{DwSurveyDcsWrapper:K,DwSurveyChartsCommon:s("VU/8")(Se,ke,!1,function(e){s("6MpI")},"data-v-79954f96",null).exports},data:function(){return{questions:[],loading:!0}},mounted:function(){this.surveyChartData()},methods:{surveyChartData:function(){var e,t,s=this;(e=this.$route.params.id,t={surveyId:e},_({url:b.surveyReport,method:"get",params:t})).then(function(e){var t,a=e.data.data;s.questions=a.questions,s.questions.length<=0&&(t="问卷还没有任何题目",Object(m.Message)({message:t,type:"info",duration:5e3}),s.loading=!1);for(var r=0;r<s.questions.length;r++){var n=s.questions[r],i=n.anCount,o=void 0;"CHECKBOX"===n.quType?(n.quTypeName="多选题",o=n.quCheckboxs):"RADIO"===n.quType?(n.quTypeName="单选题",o=n.quRadios):"FILLBLANK"===n.quType?n.quTypeName="填空题":"SCORE"===n.quType?(n.quTypeName="评分题",o=n.quScores):"ORDERQU"===n.quType?(n.quTypeName="排序题",o=n.quOrderbys):"MULTIFILLBLANK"===n.quType?(n.quTypeName="多项填空题",o=n.quMultiFillblanks):n.quTypeName=n.quType;var l=[];if("RADIO"===n.quType||"CHECKBOX"===n.quType||"SCORE"===n.quType||"ORDERQU"===n.quType||"MULTIFILLBLANK"===n.quType)for(var u=0;u<o.length;u++){var d=o[u],c=void 0;if("RADIO"===n.quType||"CHECKBOX"===n.quType){var v=d.anCount;0===i&&(i=1),null===v&&(o[u].anCount=0);var p=(v/i*100).toFixed(2);o[u].percent=p,c={optionName:d.optionName,anCount:d.anCount,percent:p}}else if("SCORE"===n.quType){var f=d.avgScore,y=(f/n.paramInt02*100).toFixed(2),h=f.toFixed(2);c={optionName:d.optionName,anCount:h,percent:y}}else if("ORDERQU"===n.quType){var w=((o.length-u)/((1+o.length)*o.length/2)*100).toFixed(2);c={optionName:d.optionName,anCount:o.length-u,orderNum:u+1,percent:w}}else if("MULTIFILLBLANK"===n.quType){var g=d.anCount;0===i&&(i=1),null===g&&(o[u].anCount=0);var _=(g/i*100).toFixed(2);o[u].percent=_,c={optionName:d.optionName,anCount:d.anCount,percent:_}}l.push(c)}s.questions[r].quStatOptions=l}s.loading=!1})}}},Ie={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{id:e.id,"is-survey-chart":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){return t.survey,[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},e._l(e.questions,function(e,t){return s("dw-survey-charts-common",{key:e.id,attrs:{id:e.id,index:t,question:e}})}),1)]}}])})],1)},staticRenderFns:[]},Ae=s("VU/8")(De,Ie,!1,null,null,null).exports,Fe={name:"DwSurveyAnswer",components:{DwSurveyDcsWrapper:K},data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0}},mounted:function(){this.queryList(1)},methods:{handleGo:function(e){this.$router.push(e)},handlePush:function(e){this.$router.push(e)},handleDelete:function(e,t){var s=this;console.log(e,t),this.$msgbox.confirm("确认删除此条答卷吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){(function(e){return _({url:b.surveyAnswerDelete,method:"delete",data:e})})({id:[t.id]}).then(function(e){console.log(e),200===e.data.resultCode?(s.$message.success("删除成功，即将刷新数据。"),s.queryList(1)):s.$message.error("删除答卷失败")})}).catch(function(){})},handleCurrentChange:function(e){this.queryList(e)},handleExport:function(){var e=b.surveyAnswerExport+"?surveyId="+this.$route.params.id;window.location.href=e},queryList:function(e){var t,s,a,r,n=this;(t=this.pageSize,s=e,a=this.$route.params.id,r={pageSize:t,current:s,surveyId:a},_({url:b.surveyAnswerList,method:"get",params:r})).then(function(e){var t=e.data.data;n.tableData=t,n.total=e.data.total,n.currentPage=e.data.current,n.pageSize=e.data.pageSize})}}},qe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("dw-survey-dcs-wrapper",{attrs:{id:e.id,"is-answer-data":"true"},scopedSlots:e._u([{key:"dw-dcs-main-slot",fn:function(t){return t.survey,[s("div",{staticClass:"dw-dcs-main-title"},[s("el-row",{attrs:{type:"flex"}},[s("el-col",{attrs:{span:18}},[s("div",{staticStyle:{"font-size":"14px",padding:"10px"}},[s("strong",[e._v("原始数据列表")])])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right","padding-right":"16px"},attrs:{span:6}},[s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleExport}},[e._v("导出数据")])],1)],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"回答IP"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{domProps:{innerHTML:e._s(t.row.ipAddr)}}),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{domProps:{innerHTML:e._s(t.row.ipAddr)}})])])]}}],null,!0)}),e._v(" "),s("el-table-column",{attrs:{label:"回答的题数"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(null!=t.row.completeItemNum?t.row.completeItemNum:0)+" 题")])]}}],null,!0)}),e._v(" "),s("el-table-column",{attrs:{label:"回答时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{staticClass:"el-icon-time"}),e._v(" "),s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.endAnDate))])]}}],null,!0)}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[s("el-tooltip",{attrs:{effect:"dark",content:"查看数据",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-view"},on:{click:function(s){return e.handleGo("/no-top/dw-survey/d/data/"+t.row.surveyId+"/"+t.row.id)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"删除数据",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}],null,!0)})],1),e._v(" "),s("div",{staticClass:"dw-pagination"},[s("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)]}}])})],1)},staticRenderFns:[]};var Ne=s("VU/8")(Fe,qe,!1,function(e){s("atR/")},"data-v-75dc1b75",null).exports,Te={name:"DwSurveyAnswerInfo",props:{question:{type:Object,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,radio:3,formSize:"medium",rateValue:3.7,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:""}},mounted:function(){},methods:{goBack:function(){this.$router.back()},handleInfo:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},handleCurrentChange:function(e){this.queryList(e)}}},Ue={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px","label-position":"left"}},[s("div",{staticClass:"dw-qu-item"},[s("div",{staticClass:"dw-qu-item-title"},[s("span",[e._v(e._s(e.index+1)+"、")]),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.question.quTitle)}}),e._v(" "),s("span",[e._v("【"+e._s(e.question.quTypeName)+"】")])]),e._v(" "),s("div",{staticClass:"dw-qu-item-body"},["RADIO"===e.question.quType?s("div",[s("div",[s("el-radio-group",{model:{value:e.question.anRadio.quItemId,callback:function(t){e.$set(e.question.anRadio,"quItemId",t)},expression:"question.anRadio.quItemId"}},e._l(e.question.quRadios,function(t){return s("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.optionName))])}),1)],1),e._v(" "),s("div",[s("span",[e._v(e._s(e.question.anRadio.otherText))])])]):e._e(),e._v(" "),"CHECKBOX"===e.question.quType?s("div",e._l(e.question.quCheckboxs,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id,checked:t.answer}},[e._v(e._s(t.optionName))])}),1):e._e(),e._v(" "),"FILLBLANK"===e.question.quType?s("div",[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-input",{attrs:{readonly:""},model:{value:e.question.anFillblank.answer,callback:function(t){e.$set(e.question.anFillblank,"answer",t)},expression:"question.anFillblank.answer"}})],1)],1)],1):e._e(),e._v(" "),"MULTIFILLBLANK"===e.question.quType?s("div",e._l(e.question.quMultiFillblanks,function(t,a){return s("el-form-item",{key:t.id,attrs:{label:a+1+"、"+t.optionName}},[s("el-input",{staticStyle:{width:"360px"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}})],1)}),1):e._e(),e._v(" "),"SCORE"===e.question.quType?s("div",e._l(e.question.quScores,function(t,a){return s("el-form-item",{key:t.id,attrs:{label:a+1+"、"+t.optionName}},[s("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}})],1)}),1):e._e(),e._v(" "),"ORDERQU"===e.question.quType?s("div",e._l(e.question.quOrderbys,function(t,a){return s("el-form-item",{key:t.id,attrs:{label:a+1+"、"+t.optionName}},[s("el-input",{staticStyle:{width:"360px"},model:{value:t.answer,callback:function(s){e.$set(t,"answer",s)},expression:"item.answer"}})],1)}),1):e._e()])])])],1)},staticRenderFns:[]};var Le={name:"DwSurveyAnswerInfo",components:{DwSurveyDcsWrapper:K,DwSurveyAnswerQuCommon:s("VU/8")(Te,Ue,!1,function(e){s("ZiMz")},"data-v-05caa202",null).exports},data:function(){return{survey:{questions:[]},tableData:[],pageSize:10,currentPage:1,total:0,radio:3,formSize:"medium",rateValue:3.7,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:""}},mounted:function(){this.querySurveyAnswer(1)},methods:{goBack:function(){this.$router.back()},handleInfo:function(e,t){console.log(e,t)},handleDelete:function(e,t){console.log(e,t)},querySurveyAnswer:function(){var e,t,s=this;(e=this.$route.params.answerId,t={answerId:e},_({url:b.surveyAnswerInfo,method:"get",params:t})).then(function(e){var t=e.data.data;s.survey=t;for(var a=0;a<s.survey.questions.length;a++){var r=s.survey.questions[a],n=r.quType,i=void 0;if("CHECKBOX"===n?(r.quTypeName="多选题",i=r.quCheckboxs):"RADIO"===n?(r.quTypeName="单选题",i=r.quRadios):"FILLBLANK"===n?r.quTypeName="填空题":"SCORE"===n?(r.quTypeName="评分题",i=r.quScores):"ORDERQU"===n?(r.quTypeName="排序题",i=r.quOrderbys):"MULTIFILLBLANK"===n?(r.quTypeName="多项填空题",i=r.quMultiFillblanks):r.quTypeName=n,"CHECKBOX"===n||"SCORE"===n||"ORDERQU"===n||"MULTIFILLBLANK"===n)for(var o=0;o<i.length;o++){var l=i[o];if("CHECKBOX"===n){for(var u=r.anCheckboxs,d=0;d<u.length;d++)if(u[d].quItemId===l.id){l.answer=!0;break}}else if("SCORE"===n){for(var c=r.anScores,v=0;v<c.length;v++)if(c[v].quRowId===l.id&&null!=c[v].answserScore){l.answer=parseInt(c[v].answserScore);break}}else if("ORDERQU"===n){for(var p=r.anOrders,m=0;m<p.length;m++)if(p[m].quRowId===l.id){l.answer=p[m].orderyNum;break}}else if("MULTIFILLBLANK"===n)for(var f=r.anDFillblanks,y=0;y<f.length;y++)if(f[y].quItemId===l.id){l.answer=f[y].answer;break}}}})},handleCurrentChange:function(e){}}},Re={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-page-header",{staticClass:"dw-page-header",attrs:{content:"答卷详情"},on:{back:e.goBack}}),e._v(" "),s("div",{staticClass:"dw-answer-content"},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[s("el-col",{attrs:{span:16,push:4}},[s("div",{staticStyle:{background:"white"}},[s("el-descriptions",{attrs:{column:3,border:""}},[s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-location-information"}),e._v(" 答卷IP\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.ipAddr)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-timer"}),e._v("\n                答卷时间\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.endAnDate)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-monitor"}),e._v("\n                答题数\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.completeItemNum)+"\n            ")],2),e._v(" "),s("el-descriptions-item",[s("template",{slot:"label"},[s("i",{staticClass:"el-icon-price-tag"}),e._v(" 答卷ID\n              ")]),e._v("\n              "+e._s(e.survey.surveyAnswer.id)+"\n            ")],2)],1),e._v(" "),s("div",{staticClass:"dw-answer-title",staticStyle:{"padding-top":"30px","padding-bottom":"0px"}},[e._v("答卷结果信息")]),e._v(" "),s("div",{staticStyle:{padding:"0px 20px 30px 20px"}},e._l(e.survey.questions,function(e,t){return s("dw-survey-answer-qu-common",{key:e.id,attrs:{id:e.id,index:t,question:e}})}),1)],1)])],1)],1)],1)},staticRenderFns:[]};var Ee=s("VU/8")(Le,Re,!1,function(e){s("/MZe")},"data-v-7e0c547a",null).exports,Me={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{height:"600px"},attrs:{"default-active":this.defActive,router:""}},[t("el-menu-item",{attrs:{index:"/dw/user"}},[t("i",{staticClass:"el-icon-user"}),this._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[this._v("我的账号")])]),this._v(" "),t("el-menu-item",{attrs:{index:"/dw/user/pwd"}},[t("i",{staticClass:"el-icon-key"}),this._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[this._v("修改密码")])])],1)},staticRenderFns:[]};var Oe=s("VU/8")({name:"DwUserMenu",data:function(){return{defActive:"/dw/user"}},mounted:function(){this.setDefActive()},methods:{setDefActive:function(){this.$route.fullPath.indexOf("/dw/user/pwd")>=0&&(this.defActive="/dw/user/pwd")}}},Me,!1,function(e){s("6xT/")},"data-v-125c467a",null).exports;var Pe={name:"DwUser",components:{DwUserMenu:Oe},data:function(){return{userInfo:{}}},mounted:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;_({url:b.curUserInfo,method:"get"}).then(function(t){var s=t.data.data;e.userInfo=s})}}},$e={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-user-body"},[s("el-row",[s("el-col",{staticStyle:{height:"600px"},attrs:{span:4}},[s("dw-user-menu")],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticStyle:{padding:"30px"}},[s("el-descriptions",{attrs:{title:"账号信息",column:"1",border:""}},[s("el-descriptions-item",{attrs:{label:"账号"}},[e._v(e._s(e.userInfo.loginName))]),e._v(" "),s("el-descriptions-item",{attrs:{label:"状态"}},[0===e.userInfo.status?s("el-tag",{attrs:{type:"danger"}},[e._v("不可用")]):1===e.userInfo.status?s("el-tag",{attrs:{type:"info"}},[e._v("未激活")]):2===e.userInfo.status?s("el-tag",{attrs:{type:"success"}},[e._v("激活")]):s("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])],1),e._v(" "),s("el-descriptions-item",{attrs:{label:"创建时间"}},[e._v(e._s(e.userInfo.createTime))]),e._v(" "),s("el-descriptions-item",{attrs:{label:"登录时间"}},[e._v(e._s(e.userInfo.lastLoginTime))])],1)],1)])],1)],1)])],1)],1)},staticRenderFns:[]};var Be=s("VU/8")(Pe,$e,!1,function(e){s("Ew/8")},"data-v-f5e9c078",null).exports,Ve={name:"DwUserPwd",components:{DwUserMenu:Oe},data:function(){var e=this;return{ruleForm:{pass:"",checkPass:"",oldPass:""},rules:{pass:[{required:!0,message:"请输入新登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"},{validator:function(t,s,a){""===s?a(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),a())},trigger:"blur"}],checkPass:[{required:!0,message:"请再次输入新登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"},{validator:function(t,s,a){""===s?a(new Error("请再次输入密码")):s!==e.ruleForm.pass?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}],oldPass:[{required:!0,message:"请输入原登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}]}}},mounted:function(){},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var s,a,r;(s=t.ruleForm.oldPass,a=t.ruleForm.pass,r={curpwd:s,pwd:a},_({url:b.curUserPwdUpdate,method:"post",params:r})).then(function(e){200===e.data.resultCode?t.$message.success("密码修改成功"):t.$message.error("密码修改失败")})})},resetForm:function(e){this.$refs[e].resetFields()}}},ze={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-user-body"},[s("el-row",[s("el-col",{staticStyle:{height:"600px"},attrs:{span:4}},[s("dw-user-menu")],1),e._v(" "),s("el-col",{attrs:{span:20}},[s("div",{staticStyle:{padding:"30px",width:"400px"}},[s("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":"","label-width":"100px","label-position":"top"}},[s("el-form-item",{attrs:{label:"原密码",prop:"oldPass"}},[s("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.ruleForm.oldPass,callback:function(t){e.$set(e.ruleForm,"oldPass",t)},expression:"ruleForm.oldPass"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"pass"}},[s("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[s("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"padding-top":"20px"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交修改")]),e._v(" "),s("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])],1)],1)])],1)],1)},staticRenderFns:[]};var He=s("VU/8")(Ve,ze,!1,function(e){s("nSwW")},"data-v-6575f2df",null).exports;var We={name:"AdminUserList",data:function(){return{tableData:[],pageSize:10,currentPage:1,total:0,formInline:{loginName:null,status:null},dialogTitle:"创建用户",dialogFormVisible:!1,userForm:{id:null,loginName:"",pwd:"",status:2},userFormRules:{loginName:[{required:!0,message:"请输入登录账号",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],pwd:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],status:[{required:!0,message:"请选择账号状态",trigger:"change"}]},formLabelWidth:"120px"}},mounted:function(){this.queryList(1)},methods:{buttonClickA:function(e){window.location.href=e},handlePush:function(e){this.$router.push(e)},onSubmit:function(){console.log("submit!"),this.queryList(1)},handleCurrentChange:function(e){this.queryList(e)},openCreateUser:function(){this.dialogTitle="创建用户",this.dialogFormVisible=!0,this.userFormRules.pwd=[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}],this.userForm.id=null},queryList:function(e){var t=this,s=this.formInline,a=s.status,r=s.loginName;(function(e,t,s,a){var r={pageSize:e,current:t,status:s,loginName:a};return _({url:b.adminUserList,method:"get",params:r})})(this.pageSize,e,a,r).then(function(e){var s=e.data.data;t.tableData=s,t.total=e.data.total,t.currentPage=e.data.current,t.pageSize=e.data.pageSize})},handleEdit:function(e,t){this.dialogTitle="编辑用户",this.dialogFormVisible=!0,this.userFormRules.pwd={required:!1},this.userForm.loginName=t.loginName,this.userForm.status=t.status,this.userForm.id=t.id,console.log(e,t)},handleDelete:function(e,t){var s=this;console.log(e,t),this.$msgbox.confirm("确认删除此用户吗？","删除警告",{type:"warning",confirmButtonText:"确认删除"}).then(function(){(function(e){return _({url:b.adminUserDelete,method:"delete",data:e})})({id:[t.id]}).then(function(e){200===e.data.resultCode?(s.$message.success("删除成功，即将刷新数据。"),s.queryList(1)):s.$message.error("添加用户失败")})}).catch(function(){})},handleSaveUser:function(){var e=this;this.$refs.userForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var s=e.userForm,a=s.id,r=s.loginName,n=s.pwd,i=s.status;null===a?function(e){return _({url:b.adminUserCreate,method:"post",data:e})}({loginName:r,pwd:n,status:i}).then(function(t){200===t.data.resultCode?(e.$message.success("添加成功，即将刷新数据。"),e.queryList(1),e.dialogFormVisible=!1):e.$message.error("添加用户失败")}):function(e){return _({url:b.adminUserUpdate,method:"put",data:e})}({id:a,loginName:r,pwd:n,status:i}).then(function(t){200===t.data.resultCode?(e.$message.success("修改成功，即将刷新数据。"),e.queryList(1),e.dialogFormVisible=!1):e.$message.error("添加用户失败")})})}}},Ge={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:20,offset:2}},[s("div",{staticClass:"dw-table-form",staticStyle:{"padding-left":"60px"}},[s("el-form",{staticClass:"dw-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[s("el-form-item",{attrs:{label:"登录账号"}},[s("el-input",{attrs:{placeholder:"请输入查询的账号关键字",clearable:""},model:{value:e.formInline.loginName,callback:function(t){e.$set(e.formInline,"loginName",t)},expression:"formInline.loginName"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"},attrs:{label:"账号状态"}},[s("el-select",{attrs:{placeholder:"请选择账号状态",clearable:""},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},[s("el-option",{attrs:{label:"不可用",value:"0"}}),e._v(" "),s("el-option",{attrs:{label:"未激活",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"激活",value:"2"}})],1)],1),e._v(" "),s("el-form-item",{staticStyle:{"margin-left":"40px"}},[s("el-button",{on:{click:e.onSubmit}},[e._v("重置")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dw-table"},[s("div",{staticClass:"dw-table-title"},[s("el-row",{attrs:{span:24,type:"flex",justify:"space-between",align:"middle"}},[s("el-col",{attrs:{span:4}},[s("h3",[e._v("用户管理")])]),e._v(" "),s("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[s("el-button",{directives:[{name:"has-dw-role",rawName:"v-has-dw-role",value:"DWSURVEY_SUPER_ADMIN",expression:"'DWSURVEY_SUPER_ADMIN'"}],attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.openCreateUser()}}},[e._v("添加用户")])],1)],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{label:"登录名"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{domProps:{innerHTML:e._s(t.row.loginName)}}),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{domProps:{innerHTML:e._s(t.row.loginName)}})])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?s("el-tag",{attrs:{type:"danger"}},[e._v("不可用")]):1===t.row.status?s("el-tag",{attrs:{type:"info"}},[e._v("未激活")]):2===t.row.status?s("el-tag",{attrs:{type:"success"}},[e._v("激活")]):s("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{"disable-transitions":""}},[e._v("未知")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"登录时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("i",{staticClass:"el-icon-time"}),e._v(" "),s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.lastLoginTime))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[s("el-tooltip",{attrs:{effect:"dark",content:"编辑问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",content:"编辑",icon:"el-icon-edit"},on:{click:function(s){return e.handleEdit(t.$index,t.row)}}})],1),e._v(" "),s("el-tooltip",{attrs:{effect:"dark",content:"删除问卷",placement:"top"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}})],1)],1)]}}])})],1),e._v(" "),s("div",{staticClass:"dw-pagination"},[s("el-pagination",{attrs:{"page-size":e.pageSize,"current-page":e.currentPage,total:e.total,background:"",layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)])],1),e._v(" "),s("div",[s("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"append-to-body":"",width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"userForm",attrs:{model:e.userForm,rules:e.userFormRules,"status-icon":"","label-position":"top"}},[s("el-form-item",{staticStyle:{"margin-top":"0px"},attrs:{"label-width":e.formLabelWidth,label:"设置账号",prop:"loginName"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请设置登录账号","show-word-limit":""},model:{value:e.userForm.loginName,callback:function(t){e.$set(e.userForm,"loginName",t)},expression:"userForm.loginName"}})],1),e._v(" "),s("el-form-item",{staticClass:"dw-dialog-form-item",attrs:{"label-width":e.formLabelWidth,label:"账号状态",prop:"status"}},[s("el-radio-group",{model:{value:e.userForm.status,callback:function(t){e.$set(e.userForm,"status",t)},expression:"userForm.status"}},[s("el-radio",{attrs:{label:0}},[e._v("不可用")]),e._v(" "),s("el-radio",{attrs:{label:1}},[e._v("未激活")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("激活")])],1)],1),e._v(" "),s("el-form-item",{staticClass:"dw-dialog-form-item",attrs:{"label-width":e.formLabelWidth,label:"设置密码",prop:"pwd"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"新建时必须设置密码，修改时不设置代表不修改。","show-password":""},model:{value:e.userForm.pwd,callback:function(t){e.$set(e.userForm,"pwd",t)},expression:"userForm.pwd"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSaveUser()}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var Qe=s("VU/8")(We,Ge,!1,function(e){s("5GBw")},"data-v-7f9b0f9a",null).exports,je={name:"Login",data:function(){return{ruleForm:{email:"",pass:""},rules:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],pass:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:6,max:18,message:"长度在 6 到 18 个字符",trigger:"blur"}]}}},mounted:function(){this.pageH=window.height},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var s,a,r;(s=t.ruleForm.email,a=t.ruleForm.pass,r={userName:s,password:a,type:"account"},_({url:b.loginIn,method:"post",params:r})).then(function(e){var s=e.data;console.log("login-begin"),console.log(s),"ok"===s.status?(u.setAuthority(s.currentAuthority),u.setUserName(t.ruleForm.email),t.$router.push("/dw/survey/")):s.hasOwnProperty("httpResult")&&null!=s.httpResult&&s.httpResult.hasOwnProperty("resultMsg")?y(s.httpResult.resultMsg):y("登录失败，请确认！")})})},resetForm:function(e){this.$refs[e].resetFields()}}},Ze={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"loginPage"}},[s("el-row",{attrs:{gutter:0}},[s("el-col",{attrs:{span:10,offset:7}},[s("div",{staticClass:"loginFormContent"},[s("div",{staticStyle:{"text-align":"center"}},[s("h3",[e._v("欢迎登录")]),e._v(" "),s("div",[s("el-tag",{attrs:{type:"success"}},[e._v("调问")]),e._v(" "),s("el-tag",{attrs:{type:"warning"}},[e._v("专业")]),e._v(" "),s("el-tag",[e._v("开源")]),e._v(" "),s("el-tag",{attrs:{type:"success"}},[e._v("实用的")]),e._v(" "),s("el-tag",{attrs:{type:"warning"}},[e._v("调查问卷系统")])],1)]),e._v(" "),s("div",[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":"","label-position":"top","label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[s("el-form-item",{attrs:{label:"用户名",prop:"email"}},[s("el-input",{attrs:{autocomplete:"on"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"pass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off","show-password":""},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),s("el-form-item",[s("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary","native-type":"submit"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")])],1)],1)],1)])])],1)],1)},staticRenderFns:[]};var Xe=s("VU/8")(je,Ze,!1,function(e){s("KS9L")},"data-v-3d3310d6",null).exports;a.default.use(L.a);var Ye=new L.a({routes:[{path:"/",meta:"首页",component:M,children:[{path:"/",redirect:"/dw/survey"},{path:"/dw/survey",name:"DwSurveyList",component:X},{path:"/dw/survey/c/attr/:id",name:"DwSurveyAttr",component:se},{path:"/dw/survey/c/url/:id",name:"DwAnswerUrl",component:ue},{path:"/dw/survey/c/comp/:id",name:"DwSiteComp",component:ve},{path:"/dw/survey/c/share/:id",name:"DwSiteShare",component:fe},{path:"/dw/survey/c/weixin/:id",name:"DwAnswerWeixin",component:we},{path:"/dw/survey/d/chart/:id",name:"DwSurveyCharts",component:Ae},{path:"/dw/survey/d/data/:id",name:"DwSurveyAnswer",component:Ne},{path:"/dw/user/pwd",name:"DwUserPwd",component:He},{path:"/dw/user",name:"DwUser",component:Be},{path:"/dw/admin/user",name:"AdminUserList",component:Qe}]},{path:"/diaowen/:sid",name:"DwAnswer",component:G},{path:"/no-top",name:"NoTopLayout",component:z,children:[{path:"/no-top/dw-survey/d/data/:id/:answerId",name:"DwSurveyAnswerInfo",component:Ee}]},{path:"/login",name:"LoginLayout",component:$,children:[{path:"/",name:"Login",component:Xe}]}]}),Je=s("aLYK"),Ke=(s("tvR6"),s("uMhA"),s("D/PP"),s("eonX"));a.default.directive("hasDwRole",{inserted:function(e,t){!function(e,t){(function(e){for(var t=u.getAuthority(),s=0;s<t.length;s++)if(e===t[s])return!0;return!1})(t.value)||e.parentNode.removeChild(e)}(e,t)}}),a.default.config.productionTip=!1,a.default.use(f.a),a.default.use(Je.a,p.a),a.default.component("icon",Ke.a),new a.default({el:"#app",router:Ye,components:{App:U},template:"<App/>"})},ORmu:function(e,t){},UTC3:function(e,t){},YXH3:function(e,t){},ZRT9:function(e,t){},ZiMz:function(e,t){},"atR/":function(e,t){},f6Xx:function(e,t){},g3U5:function(e,t){},nSwW:function(e,t){},q3Mn:function(e,t){},tef8:function(e,t){},tvR6:function(e,t){},uMhA:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ba05fbe971394f479030.js.map